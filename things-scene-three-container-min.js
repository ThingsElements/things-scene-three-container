!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=(s.Component3d,s.ImageView),l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"zPos",name:"zPos",property:"zPos"},{type:"number",label:"depth",name:"depth",property:"depth"},{type:"number",label:"rotation",name:"rotation",property:"rotation"},{type:"color",label:"boxColor",name:"boxColor",property:"boxColor"}]},h=function(e){function t(e,n,i){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this));return a._model=e,a._threeContainer=i,a.createObject(e,n),a}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.left,r=void 0===n?0:n,o=e.top,i=void 0===o?0:o,a=e.zPos,s=void 0===a?0:a,c=e.width,u=void 0===c?1:c,l=e.height,h=void 0===l?1:l,d=e.depth,f=void 0===d?1:d,p=r+u/2-t.width/2,y=i+h/2-t.height/2,m=s+.5*f,b=e.rotation;this.add(this.createCube(u,h,f));var v=this.createTextureBoard(u,f);this.add(v),v.position.set(0,0,.5*h),this.type=e.type,this.position.set(p,m,y),this.rotation.y=-b||0}},{key:"createCube",value:function(e,t,n){var r=this._model.boxColor,o=void 0===r?"#ccaa76":r,i=new THREE.BoxGeometry(e,n,t),a=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide}),s=new THREE.Mesh(i,a);return s}},{key:"createTextureBoard",value:function(e,t){var n,r=this,o=this._model.fillStyle,i=void 0===o?"#ccaa76":o;if(i&&"pattern"==i.type&&i.image){var a=this._threeContainer._textureLoader.load(this._threeContainer.app.url(i.image),function(){r._threeContainer.render_threed()});a.repeat.set(1,1),a.minFilter=THREE.LinearFilter,n=new THREE.MeshBasicMaterial({map:a,side:THREE.FrontSide})}else n=new THREE.MeshLambertMaterial({color:i||"#ccaa76",side:THREE.FrontSide});var s=new THREE.PlaneGeometry(e,t,1,1),c=new THREE.Mesh(s,n);return c}},{key:"raycast",value:function(){}}]),t}(THREE.Object3D);n["default"]=h;var d=n.Banner2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"nature",get:function(){return l}}]),t}(u);c.register("banner",d),scene.Component3d.register("banner",h)},{}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=scene,a=(i.Component,i.Container,i.Layout,{}),s=function(){function e(){r(this,e)}return o(e,null,[{key:"register",value:function(e,t){return t?void(a[e]=t):a[e]}}]),e}();n["default"]=s,scene.Component3d=s},{}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rx,i=e.rotation;this.type=e.type,this.createCone(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCone",value:function(e,t){var n=this.model.fillStyle,r=void 0===n?"lightgray":n;this.geometry=new THREE.ConeGeometry(e,t,20),this.material=new THREE.MeshLambertMaterial({color:r,side:THREE.FrontSide})}},{key:"setEuler",value:function(e){var t=e.yaw,n=e.pitch,r=e.roll;this.setRotationFromEuler(new THREE.Vector3(r,n,t))}},{key:"setQuaternion",value:function(e){var t=e.x,n=e.y,r=e.z,o=e.w;this.setRotationFromQuaternion(new THREE.Quaternion(t,n,r,o))}},{key:"onUserDataChanged",value:function(){this.userData&&this.userData.hasOwnProperty("qx")&&this.userData.hasOwnProperty("qy")&&this.userData.hasOwnProperty("qz")&&this.userData.hasOwnProperty("qw")&&this.setQuaternion({x:this.userData.qx,y:this.userData.qy,z:this.userData.qz,w:this.userData.qw})}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=h;var d=n.Cone2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}(u);c.register("cone",d),scene.Component3d.register("cone",h)},{}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Rect,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"}]},h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));i._model=e,i.createObject(e,n);var a=new THREE.AxisHelper(100);return i.add(a),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=e.zPos||.5*e.depth,i=e.rotation;this.type=e.type,this.createCube(e.width,e.height,e.depth),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCube",value:function(e,t,n){var r=this.model.fillStyle,o=void 0===r?"lightgray":r;this.geometry=new THREE.BoxGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"setPosition",value:function(e){var t=e.x,n=e.y;this.position.set(t,0,n)}},{key:"setQuaternion",value:function(e){var t=e.x,n=e.y,r=e.z,o=e.w,i=new THREE.Quaternion;i.set(t,n,r,o),this.setRotationFromQuaternion(i.normalize()),this.updateMatrix()}},{key:"onUserDataChanged",value:function(){this.userData&&(this.userData.hasOwnProperty("location")&&this.setPosition(this.userData.location),this.userData.hasOwnProperty("qx")&&this.userData.hasOwnProperty("qy")&&this.userData.hasOwnProperty("qz")&&this.userData.hasOwnProperty("qw")&&this.setQuaternion({x:this.userData.qx,y:this.userData.qy,z:this.userData.qz,w:this.userData.qw}))}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=h;var d=n.Cube2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}(u);c.register("cube",d),scene.Component3d.register("cube",h)},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rz/2,i=e.rotation;this.type=e.type,this.createCylinder(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCylinder",value:function(e,t){var n=this.model.fillStyle,r=void 0===n?"lightgray":n;this.geometry=new THREE.CylinderGeometry(e,e,t,25),this.material=new THREE.MeshLambertMaterial({color:r,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=h;var d=n.Cylinder2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}(u);c.register("cylinder",d),scene.Component3d.register("cylinder",h)},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Rect,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"},{type:"color",label:"leg-color",name:"legColor",property:"legColor"}]},h=function(e){function t(e,n,i){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this));return a._model=e,a._threeContainer=i,a.createObject(e,n),a}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=.5*e.depth,i=e.rotation;this.type=e.type;var a=this.createDeskLegs(e.width,e.height,e.depth);this.add(a);var s=e.depth/2-this.boardThickness,c=this.createDeskBoard(e.width,e.height);c.position.set(0,s,0),c.rotation.x=Math.PI/2,this.add(c),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createDeskLegs",value:function(e,t,n){var r=this.legThickness,o=this.margin;n-=r;for(var i=new THREE.Group,a=e/2-r/2-o,s=t/2-r/2-o,c=-r,u=0;4>u;u++){var l=new THREE.BoxGeometry(r,n,r),h=new THREE.MeshBasicMaterial({color:this._model.legColor||"#252525"}),d=new THREE.Mesh(l,h);switch(u){case 0:d.position.set(a,c,s);break;case 1:d.position.set(a,c,-s);break;case 2:d.position.set(-a,c,s);break;case 3:d.position.set(-a,c,-s)}i.add(d)}return i}},{key:"createDeskBoard",value:function(e,t){var n=10,r=new THREE.MeshBasicMaterial({color:this._model.fillStyle||"#ccaa76"}),o=new THREE.BoxGeometry(e,t,n,1,1),i=new THREE.Mesh(o,r);return i}},{key:"cube",value:function(e){var t=.5*e.width,n=.5*e.height,r=.5*e.depth,o=new THREE.Geometry;return o.vertices.push(new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,r)),o}},{key:"raycast",value:function(){}},{key:"onchange",value:function(e){e.hasOwnProperty("data")&&(this.data=e.data)}},{key:"boardThickness",get:function(){var e=this._model.depth;return Math.min(10,e/10)}},{key:"legThickness",get:function(){var e=this._model,t=e.width,n=e.height,r=Math.min(t,n);return Math.min(10,r/10)}},{key:"margin",get:function(){return Math.min(this.legThickness/5,2)}}]),t}(THREE.Object3D);n["default"]=h;var d=n.Desk2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}(u);c.register("desk",d),scene.Component3d.register("desk",h)},{}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=(s.Container,s.Layout,s.Rect),l=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=.5*e.depth,i=e.rotation;this.type=e.type,this.createDoor(e.width,e.height,e.depth),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createDoor",value:function(e,t,n){var r=this.model.fillStyle,o=void 0===r?"saddlebrown":r;this.geometry=new THREE.BoxGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=l;var h=n.Door2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}}]),t}(u);c.register("door",h),scene.Component3d.register("door",l)},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){if(!a.done){a.done=!0;var e=new THREE.OBJLoader,t=new THREE.MTLLoader;e.setPath("./obj/Fork_lift/"),t.setPath("./obj/Fork_lift/"),t.load("ForkLift.mtl",function(t){t.preload(),e.setMaterials(t),t.side=THREE.frontSide,e.load("ForkLift.obj",function(e){s=e})})}}Object.defineProperty(n,"__esModule",{value:!0});var s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),c(t,[{key:"createObject",value:function(e,n){if(!t.extObject)return void setTimeout(this.createObject.bind(this,e,n),50);{var r=e.cx-n.width/2,o=e.cy-n.height/2;.5*e.depth,e.left-n.width/2,e.top-n.height/2,e.rotation}this.type="forklift",this.add(t.extObject.clone()),this.scale.set(10,10,10),this.position.set(r,0,o),this.rotation.y=e.rotation||0}}],[{key:"extObject",get:function(){return s||a(),s}}]),t}(THREE.Object3D);n["default"]=u,scene.Component3d.register("forklift",u)},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=["#6666ff","#ccccff","#ffcccc","#cc3300"],c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"z-pos",name:"zPos",property:"zPos"},{type:"string",label:"location",name:"location",property:"location"}]},u=function(e){function t(e,n,i){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this));return a._model=e,a._container=i,a.userData.temperature=e.humidity?e.humidity[0]:0,a.userData.humidity=e.humidity?e.humidity[1]:0,a.createObject(e,n),a}return i(t,e),a(t,[{key:"createObject",value:function(e,t){{var n=e.cx-t.width/2,r=e.cy-t.height/2,o=(e.zPos||0)+e.depth/2;e.rotation}this.type="humidity-sensor",e.location&&(this.name=e.location);for(var i=0;3>i;i++){var a=this.createSensor(e.rx*(1+.5*i),e.ry*(1+.5*i),e.depth*(1+.5*i),i);a.material.opacity=.5-.15*i}this.position.set(n,o,r),this.rotation.y=e.rotation||0,this._container._heatmap.addData({x:Math.floor(e.cx),y:Math.floor(e.cy),value:this.userData.temperature}),this._container.updateHeatmapTexture()}},{key:"createSensor",value:function(e,t,n,r){var o,i=0===r,a=new THREE.SphereGeometry(e,32,32);o=i?new THREE.MeshLambertMaterial({color:"#cc3300",side:THREE.FrontSide}):new THREE.MeshBasicMaterial({color:"#cc3300",side:THREE.FrontSide,wireframe:!0,wireframeLinewidth:1});var s=new THREE.Mesh(a,o);return s.material.transparent=!0,i?s.onmousemove=this.onmousemove:s.raycast=function(){},this.add(s),s}},{key:"onUserDataChanged",value:function(){var e=this._model,t=e.cx,n=e.cy;t=Math.floor(t),n=Math.floor(n);var r=this.userData.temperature,o=!0,i=!1,a=void 0;try{for(var c,u=this.children[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value,h=0;h=0>r?0:10>r?1:20>r?2:3,l.material.color.set(s[h])}}catch(d){i=!0,a=d}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw a}}var f=this._container._heatmap._store._data,p=f[t][n];this._container._heatmap.addData({x:t,y:n,value:r-p}),this._container._heatmap.repaint(),this._container.updateHeatmapTexture()}},{key:"onmousemove",value:function(e,t){var n=t.tooltip||t._scene2d.getObjectByName("tooltip");if(n&&(t._scene2d.remove(n),t.tooltip=null,t.render_threed()),this.parent.visible){this.parent.userData||(this.parent.userData={});var r="";for(var o in this.parent.userData)this.parent.userData[o]&&(r+=o+": "+this.parent.userData[o]+"\n");if(r.length>0){n=t.tooltip=t.makeTextSprite(r);var i=new THREE.Vector3,a=n.getWorldScale().clone(),s=a.x/t.model.width,c=a.y/t.model.height;i.set(t._mouse.x,t._mouse.y,.5),a.normalize(),a.x=a.x/2*s,a.y=-a.y/2*c,a.z=0,i.add(a),i.unproject(t._2dCamera),n.position.set(i.x,i.y,i.z),n.name="tooltip",n.scale.x=n.scale.x*s,n.scale.y=n.scale.y*c,t._scene2d.add(n),t._renderer&&t._renderer.render(t._scene2d,t._2dCamera),t.invalidate()}}}}]),t}(THREE.Object3D);n["default"]=u;var l=scene,h=l.Component,d=l.Ellipse,f=n.Sensor=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"_draw",value:function(e){var t=this.bounds,n=t.left,r=t.top,o=t.width,i=t.height;e.beginPath(),e.rect(n,r,o,i),this.model.fillStyle={type:"pattern",fitPattern:!0,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABBCAYAAACTiffeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDQ0E1QkUzRTRDMDcxMUU2QkMyRDk3MzlGN0EzMTI2NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDQ0E1QkUzRjRDMDcxMUU2QkMyRDk3MzlGN0EzMTI2NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJFQ0Q4QzE5NEI1MjExRTZCQzJEOTczOUY3QTMxMjY1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJFQ0Q4QzFBNEI1MjExRTZCQzJEOTczOUY3QTMxMjY1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tgU1kQAAB4pJREFU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"},this.drawFill(e)}},{key:"nature",get:function(){return c}}]),t}(d);h.register("humidity-sensor",f),scene.Component3d.register("humidity-sensor",u)},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./component-3d");Object.defineProperty(n,"Component3d",{enumerable:!0,get:function(){return r(o)["default"]}});var i=e("./three-container");Object.defineProperty(n,"ThreeContainer",{enumerable:!0,get:function(){return r(i)["default"]}});var a=e("./video-player-360");Object.defineProperty(n,"VideoPlayer360",{enumerable:!0,get:function(){return r(a)["default"]}});var s=e("./door");Object.defineProperty(n,"Door",{enumerable:!0,get:function(){return r(s)["default"]}});var c=e("./forkLift");Object.defineProperty(n,"ForkLift",{enumerable:!0,get:function(){return r(c)["default"]}});var u=e("./humidity-sensor");Object.defineProperty(n,"HumiditySensor",{enumerable:!0,get:function(){return r(u)["default"]}});var l=e("./person");Object.defineProperty(n,"Person",{enumerable:!0,get:function(){return r(l)["default"]}});var h=e("./plane");Object.defineProperty(n,"Plane",{enumerable:!0,get:function(){return r(h)["default"]}});var d=e("./rack");Object.defineProperty(n,"Rack",{enumerable:!0,get:function(){return r(d)["default"]}});var f=e("./stock");Object.defineProperty(n,"Stock",{enumerable:!0,get:function(){return r(f)["default"]}});var p=e("./wall");Object.defineProperty(n,"Wall",{enumerable:!0,get:function(){return r(p)["default"]}});var y=e("./cube");Object.defineProperty(n,"Cube",{enumerable:!0,get:function(){return r(y)["default"]}});var m=e("./cylinder");Object.defineProperty(n,"Cylinder",{enumerable:!0,get:function(){return r(m)["default"]}});var b=e("./sphere");Object.defineProperty(n,"Sphere",{enumerable:!0,get:function(){return r(b)["default"]}});var v=e("./cone");Object.defineProperty(n,"Cone",{enumerable:!0,get:function(){return r(v)["default"]}});var E=e("./banner");Object.defineProperty(n,"Banner",{enumerable:!0,get:function(){return r(E)["default"]}});var w=e("./desk");Object.defineProperty(n,"Desk",{enumerable:!0,get:function(){return r(w)["default"]}})},{"./banner":1,"./component-3d":2,"./cone":3,"./cube":4,"./cylinder":5,"./desk":6,"./door":7,"./forkLift":8,"./humidity-sensor":9,"./person":11,"./plane":12,"./rack":13,"./sphere":14,"./stock":15,"./three-container":16,"./video-player-360":19,"./wall":20}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){if(!a.done){a.done=!0;var e=new THREE.TGALoader;THREE.Loader.Handlers.add(/\.tga$/i,e);var t=new THREE.OBJLoader,n=new THREE.MTLLoader;t.setPath("./obj/Casual_Man_02/"),n.setPath("./obj/Casual_Man_02/"),n.load("Casual_Man.mtl",function(e){e.preload(),t.setMaterials(e),e.side=THREE.frontSide,t.load("Casual_Man.obj",function(e){s=e})})}}Object.defineProperty(n,"__esModule",{value:!0});var s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n,i){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this));return a._model=e,a._threeContainer=i,a.createObject(e,n),a}return i(t,e),c(t,[{key:"createObject",value:function(e,n){if(!t.extObject)return void setTimeout(this.createObject.bind(this,e,n),50);{var r=e.left+e.width/2-n.width/2,o=e.top+e.height/2-n.height/2;.5*e.depth,e.left-n.width/2,e.top-n.height/2,e.rotation}this.type="person";var i=t.extObject.clone();this.add(i),i.scale.set(150,150,150),this.position.set(r,0,o),this.rotation.y=e.rotation||0,this._threeContainer.render_threed()}}],[{key:"extObject",get:function(){return s||a(),s}}]),t}(THREE.Object3D);n["default"]=u,scene.Component3d.register("person",u)},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),
Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=(s.Component,function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){this.createPlane(e.width,e.height,e.fillStyle);var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2;this.position.x=n,this.position.z=r}},{key:"createPlane",value:function(e,t,n){if(this.geometry=new THREE.PlaneGeometry(e,t),n&&"pattern"==n.type&&n.image){var r=(new THREE.TextureLoader).load(n.image);r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.repeat.set(1,1),this.material=new THREE.MeshBasicMaterial({map:r,side:THREE.FrontSide})}else this.material=new THREE.MeshBasicMaterial({color:n||"#ccaa76",side:THREE.FrontSide});this.rotation.x=-Math.PI/2,this.type="rect"}}]),t}(THREE.Mesh));n["default"]=c,scene.Component3d.register("rect",c)},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./stock"),u=r(c),l=function(e){function t(e,n,r){o(this,t);var a=i(this,Object.getPrototypeOf(t).call(this));return a._model=e,a._threeContainer=r,a.createObject(e,n),a}return a(t,e),s(t,[{key:"createObject",value:function(e,t){var n=.7,r=e.left+e.width/2-t.width/2,o=e.top+e.height/2-t.height/2,i=.5*e.depth*e.shelves,a=e.rotation;this.type=e.type;var s=this.createRackFrame(e.width,e.height,e.depth*e.shelves);this.add(s);for(var c=e.shelfPattern,l=0;l<e.shelves;l++){var h=-e.depth*e.shelves*.5;if(l>0){var d=this.createRackBoard(e.width,e.height);d.position.set(0,h+e.depth*l,0),d.rotation.x=Math.PI/2,d.material.opacity=.5,d.material.transparent=!0,this.add(d)}var f=new u["default"]({width:e.width*n,height:e.height*n,depth:e.depth*n,fillStyle:e.fillStyle}),p=e.depth*n;f.position.set(0,h+e.depth*l+.5*p,0),f.name=this.makeLocationString(this.makeShelfString(c,l+1,e.shelves)),this.add(f),this._threeContainer.putObject(f.name,f)}this.position.set(r,i,o),this.rotation.y=a||0}},{key:"createRackFrame",value:function(e,n,r){for(var o=new THREE.Group,i=0;4>i;i++){var a=new THREE.BoxGeometry(5,r,5),s=t.frameMaterial,c=new THREE.Mesh(a,s);switch(i){case 0:c.position.set(e/2,0,n/2);break;case 1:c.position.set(e/2,0,-n/2);break;case 2:c.position.set(-e/2,0,n/2);break;case 3:c.position.set(-e/2,0,-n/2)}o.add(c)}return o}},{key:"createRackBoard",value:function(e,n){var r=t.boardMaterial,o=new THREE.PlaneGeometry(e,n,1,1),i=new THREE.Mesh(o,r);return i}},{key:"cube",value:function(e){var t=.5*e.width,n=.5*e.height,r=.5*e.depth,o=new THREE.Geometry;return o.vertices.push(new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,r)),o}},{key:"makeLocationString",value:function(e){var t=this._model,n=t.locPattern,r=void 0===n?"{z}{s}-{u}-{sh}":n,o=t.zone,i=void 0===o?"":o,a=t.section,s=void 0===a?"":a,c=t.unit,u=void 0===c?"":c,l=r;return l=l.replace(/{z}/i,i),l=l.replace(/{s}/i,s),l=l.replace(/{u}/i,u),l=l.replace(/{sh}/i,e)}},{key:"makeShelfString",value:function(e,t,n){if(e&&t&&n){var r=/^\-/.test(e);e=e.replace(/#+/,"#");var o=(e.match(/0/g)||[]).length||0,i=String(r?n-t+1:t);if(i.length>o&&o>0)i=i.split("").shift(i.length-o).join("");else{for(var a="",s=0;s<o-i.length;s++)a+="0";i=a+i}return i}}},{key:"raycast",value:function(){}},{key:"onchange",value:function(e){e.hasOwnProperty("data")&&(this.data=e.data)}}],[{key:"boardMaterial",get:function(){return t._boardMaterial||(t._boardMaterial=new THREE.MeshBasicMaterial({color:"#dedede",side:THREE.DoubleSide})),t._boardMaterial}},{key:"frameMaterial",get:function(){return t._frameMaterial||(t._frameMaterial=new THREE.MeshLambertMaterial({color:13421772})),t._frameMaterial}}]),t}(THREE.Object3D);n["default"]=l,scene.Component3d.register("rack",l)},{"./stock":15}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rx,i=e.rotation;this.type=e.type,this.createSphere(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createSphere",value:function(e){var t=this.model.fillStyle,n=void 0===t?"lightgray":t;this.geometry=new THREE.SphereGeometry(e,20,20),this.material=new THREE.MeshLambertMaterial({color:n,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=h;var d=n.Sphere2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}(u);c.register("sphere",d),scene.Component3d.register("sphere",h)},{}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={A:"black",B:"#ccaa76",C:"#ff1100",D:"#252525",E:"#6ac428"},u=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this));return n._model=e,n.createObject(e),n}return i(t,e),s(t,[{key:"createObject",value:function(e){this.createStock(e.width,e.height,e.depth)}},{key:"createStock",value:function(e,n,r){this.model.fillStyle;this.geometry=new THREE.BoxGeometry(e,r,n),this.material=t.getMaterial(),this.type="stock",this.visible=!1}},{key:"onUserDataChanged",value:function(){this.material=t.getMaterial(this.userData.GUBUN||this.userData.gubun),this.visible="A"==(this.userData.GUBUN||this.userData.gubun)?!1:!0}},{key:"onmousemove",value:function(e,t){var n=t.tooltip||t._scene2d.getObjectByName("tooltip");if(n&&(t._scene2d.remove(n),t.tooltip=null,t.render_threed()),this.visible){this.userData||(this.userData={});var r="";for(var o in this.userData)/^__/.test(o)||this.userData[o]&&"object"!=a(this.userData[o])&&(r+=o+": "+this.userData[o]+"\n");if(r.length>0){n=t.tooltip=t.makeTextSprite(r);var i=new THREE.Vector3,s=new THREE.Vector3;i.set(t._mouse.x,t._mouse.y,.5),s.set(100,50,0),i.unproject(t._2dCamera),i.add(s),n.position.set(i.x,i.y,i.z),n.name="tooltip",t._scene2d.add(n),t._renderer&&t._renderer.render(t._scene2d,t._2dCamera),t.invalidate()}}}},{key:"model",get:function(){return this._model}}],[{key:"getMaterial",value:function(e){var n;switch(e){default:case"A":n=t.blackMaterial;break;case"B":n=t.brownMaterial;break;case"C":n=t.redMaterial;break;case"D":n=t.darkMaterial;break;case"E":n=t.greenMaterial}return n}},{key:"blackMaterial",get:function(){return t._material_black||(t._material_black=new THREE.MeshLambertMaterial({color:c.A,side:THREE.FrontSide})),t._material_black}},{key:"brownMaterial",get:function(){return t._material_brown||(t._material_brown=new THREE.MeshLambertMaterial({color:c.B,side:THREE.FrontSide})),t._material_brown}},{key:"redMaterial",get:function(){return t._material_red||(t._material_red=new THREE.MeshLambertMaterial({color:c.C,side:THREE.FrontSide})),t._material_red}},{key:"darkMaterial",get:function(){return t._material_dark||(t._material_dark=new THREE.MeshLambertMaterial({color:c.D,side:THREE.FrontSide})),t._material_dark}},{key:"greenMaterial",get:function(){return t._material_green||(t._material_green=new THREE.MeshLambertMaterial({color:c.E,side:THREE.FrontSide})),t._material_green}}]),t}(THREE.Mesh);n["default"]=u},{}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){s.done||(THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),s.done=!0)}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function w(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},l=e("./three-layout"),h=(r(l),e("./three-controls")),d=r(h);THREE.Cache.enabled=!0;var f=scene,p=f.Component,y=f.Container,m=f.Layout,b={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"fov",name:"fov",property:"fov"},{type:"number",label:"near",name:"near",property:"near"},{type:"number",label:"far",name:"far",property:"far"},{type:"number",label:"zoom",name:"zoom",property:"zoom"},{type:"select",label:"precision",name:"precision",property:{options:["highp","mediump","lowp"]}},{type:"checkbox",label:"anti-alias",name:"antialias",property:"antialias"},{type:"checkbox",label:"auto-rotate",name:"autoRotate",property:"autoRotate"},{type:"checkbox",label:"show-axis",name:"showAxis",property:"showAxis"},{type:"checkbox",label:"3dmode",name:"threed",property:"threed"}]},v="WebGL no support",E=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),c(t,[{key:"containable",value:function(e){return e.is3dish()}},{key:"putObject",value:function(e,t){this._objects||(this._objects={}),this._objects[e]=t}},{key:"getObject",value:function(e){return this._objects||(this._objects={}),this._objects[e]}},{key:"createFloor",value:function(e,t,n){var r,o=this.model.fillStyle,i=this;if("pattern"==o.type&&o.image){var a=this._textureLoader.load(this.app.url(o.image),function(e){e.minFilter=THREE.LinearFilter,i.render_threed()});r=new THREE.MeshBasicMaterial({map:a,side:THREE.DoubleSide})}else r=new THREE.MeshBasicMaterial({color:e,side:THREE.FrontSide});var s=new THREE.PlaneGeometry(t,n),c=new THREE.Mesh(s,r);c.rotation.x=-Math.PI/2,c.position.y=-2,c.name="floor",this._scene3d.add(c)}},{key:"createObjects",value:function(e,t){var n=this;e.forEach(function(e){var r=scene.Component3d.register(e.model.type);if(!r)return void console.warn("Class not found : 3d class is not exist");var o=new r(e.model,t,n,e);o&&setTimeout(function(){o.name=e.model.id,this._scene3d.add(o),this.putObject(e.model.id,o)}.bind(n))})}},{key:"createHeatmap",value:function(e,t){if(this._model.useHeatmap!==!1){var n=document.createElement("div");this._heatmap=h337.create({container:n,width:e,height:t,radius:Math.sqrt(e*e+t*t)/4});var r=new THREE.MeshBasicMaterial({side:THREE.FrontSide,transparent:!0,visible:!1}),o=new THREE.PlaneGeometry(e,t),i=new THREE.Mesh(o,r);i.rotation.x=-Math.PI/2,i.position.y=-1,i.name="heatmap",this._scene3d.add(i)}}},{key:"navigatePath",value:function(e){for(var t in e){var n=e[t],r=this.findTarget(n);this.emphasizeTarget(r);var o=r.parent;o.geometry.computeBoundingBox();var i=o.geometry.boundingBox,a=this.createMarker(Number(t)+1);a.position.set(0,100,0),a.position.set(0,i.max.y+25,0),a.name=n+"-marker",o.add(a)}this.render_threed()}},{key:"findTarget",value:function(e){var t=this._scene3d.getObjectByName(e,!0);if(t)return t}},{key:"emphasizeTarget",value:function(e){this._scene3d.updateMatrixWorld();var t=new THREE.Mesh(e.geometry.clone(),e.material.clone());t.name=e.name+"-emp",t.material.color.set(4499190),t.raycast=function(){},t.position.copy(e.getWorldPosition()),this._scene3d.add(t)}},{key:"findPath",value:function(e){var t=this._scene3d.getObjectByName(e,!0);if(t){t=t.parent,this._scene3d.updateMatrixWorld();var n=t.getWorldPosition(),r=(t.getWorldScale(),new THREE.BoxHelper(t,16724787));return r.material.linewidth=.1*this.model.zoom,this._scene3d.add(r),{x:n.x,y:n.y,z:n.z}}}},{key:"drawPath",value:function(e,t){var n=t.x,r=(t.y,t.z),o=e.x,i=(e.y,e.z),a=5,s=new THREE.LineBasicMaterial({color:16724787,linewidth:a}),c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(o,0,i)),c.vertices.push(new THREE.Vector3(n,0,r));var u=new THREE.Line(c,s);return this._scene3d.add(u),t}},{key:"updateHeatmapTexture",value:function(){var e=this._scene3d.getObjectByName("heatmap",!0),t=new THREE.Texture(this._heatmap._renderer.canvas);t.needsUpdate=!0,e.material.map=t,e.material.visible=!0}},{key:"createMarker",value:function(e){var t="Arial",n=32,r="rgba(255,255,255,1)",o="middle",i="center",a=10,s=new Image;s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAABuCAYAAAAKwhwQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MkZDRjQ0RjVDOTYxMUU2QjMxRjhENEQwQjZBMjk5OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MkZDRjQ1MDVDOTYxMUU2QjMxRjhENEQwQjZBMjk5OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjcyRkNGNDRENUM5NjExRTZCMzFGOEQ0RDBCNkEyOTk5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcyRkNGNDRFNUM5NjExRTZCMzFGOEQ0RDBCNkEyOTk5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nKWOowAAIaRJREFU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";var c=document.createElement("canvas"),u=c.getContext("2d");c.width=s.width,c.height=s.height,u.font=n+"px "+t,u.textBaseline="alphabetic",u.textAlign="left";var l=c.width/2,h=c.height/2,d=u.measureText(String(e)),f=d.width,p=f/2,y=n/2;"bottom"==o?y=n:"top"==o&&(y=0),"left"==i?p=f:"right"==i&&(p=0),u.drawImage(s,l-.5*s.width,h-.5*s.height,s.width,s.height),u.fillStyle=r;var m=h-.5*n+a;u.fillText(e,l-p,m);var b=new THREE.Texture(c);b.needsUpdate=!0;var v=new THREE.SpriteMaterial({map:b}),E=new THREE.Sprite(v);return E.scale.set(Math.floor(.5*s.width),Math.floor(.5*s.height),1),E.raycast=function(){},E}},{key:"makeTextSprite",value:function(e,t){if(e){void 0===t&&(t={});var n=t.hasOwnProperty("fontFace")?t.fontFace:"Arial",r=t.hasOwnProperty("fontSize")?t.fontSize:32,o=t.hasOwnProperty("textColor")?t.textColor:"rgba(255,255,255,1)",i=t.hasOwnProperty("borderWidth")?t.borderWidth:2,a=t.hasOwnProperty("borderColor")?t.borderColor:"rgba(0, 0, 0, 1.0)",s=t.hasOwnProperty("backgroundColor")?t.backgroundColor:"rgba(0, 0, 0, 0.7)",c=t.hasOwnProperty("radius")?t.radius:30,u=t.hasOwnProperty("vAlign")?t.vAlign:"middle",l=t.hasOwnProperty("hAlign")?t.hAlign:"center",h=document.createElement("canvas"),d=h.getContext("2d");h.width=window.innerWidth,h.height=window.innerHeight,d.font=r+"px "+n,d.textBaseline="alphabetic",d.textAlign="left";var f=0,p=String(e).trim().split("\n"),y=h.width/2,m=h.height/2;for(var b in p){var v=d.measureText(p[b]);f<v.width&&(f=v.width)}var E=f/2,w=r/2;"bottom"==u?w=r:"top"==u&&(w=0),"left"==l?E=f:"right"==l&&(E=0),this.roundRect(d,y-E,m-r*p.length*.5,f,r*p.length,c,i,a,s,5),d.fillStyle=o,d.lineWidth=3;var g=m-r*p.length*.5-5-i;for(var T in p)T=Number(T),g+=r,d.fillText(p[T],y-E,g);var R=new THREE.Texture(h);R.needsUpdate=!0;var _=new THREE.SpriteMaterial({map:R}),O=new THREE.Sprite(_);return O.scale.set(600,300,1),O.raycast=function(){},O}}},{key:"destroy_scene3d",value:function(){if(this.stop(),this._renderer&&this._renderer.clear(),this._renderer=void 0,this._camera=void 0,this._2dCamera=void 0,this._keyboard=void 0,this._controls=void 0,this._projector=void 0,this._load_manager=void 0,this._scene3d)for(var e in this._scene3d.children){var t=this._scene3d.children[e];t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose(),t.texture&&t.texture.dispose(),this._scene3d.remove(t)}if(this._scene2d)for(var n in this._scene2d.children){var r=this._scene2d.children[n];r.dispose&&r.dispose(),r.geometry&&r.geometry.dispose(),r.material&&r.material.dispose(),r.texture&&r.texture.dispose(),this._scene2d.remove(r)}this._scene3d=void 0,this._scene2d=void 0}},{key:"init_scene3d",value:function(){this._scene3d&&this.destroy_scene3d(),s(),this._textureLoader=new THREE.TextureLoader,this._textureLoader.withCredential=!0,this._textureLoader.crossOrigin="use-credentials";var e=this.model,t=e.width,n=e.height,r=e.fov,o=void 0===r?45:r,i=e.near,a=void 0===i?.1:i,c=e.far,u=void 0===c?2e4:c,l=e.fillStyle,h=void 0===l?"#424b57":l,f=e.light,p=void 0===f?16777215:f,y=e.antialias,m=void 0===y?!0:y,b=e.precision,v=void 0===b?"highp":b,E=this.components||[];this._scene3d=new THREE.Scene,
this._scene2d=new THREE.Scene;var w=t/n;if(this._camera=new THREE.PerspectiveCamera(o,w,a,u),this._2dCamera=new THREE.OrthographicCamera(-t/2,t/2,n/2,-n/2,1,1e3),this._scene3d.add(this._camera),this._scene2d.add(this._2dCamera),this._camera.position.set(.8*n,.8*Math.max(t,n),.8*t),this._2dCamera.position.set(.8*n,.8*Math.max(t,n),.8*t),this._camera.lookAt(this._scene3d.position),this._2dCamera.lookAt(this._scene2d.position),this._camera.zoom=.01*this.model.zoom,this.model.showAxis){var g=new THREE.AxisHelper(t);this._scene3d.add(g)}try{this._renderer=new THREE.WebGLRenderer({precision:v,alpha:!0,antialias:m})}catch(T){this._noSupportWebgl=!0}if(!this._noSupportWebgl){this._renderer.autoClear=!1,this._renderer.setClearColor(16777215,0),this._renderer.setSize(t,n),this._controls=new d["default"](this._camera,this);var R=new THREE.PointLight(p,1);this._camera.add(R),this._raycaster=new THREE.Raycaster,this._mouse=new THREE.Vector2,this._tick=0,this._clock=new THREE.Clock(!0),this.createFloor(h,t,n),this.createObjects(E,{width:t,height:n}),this._load_manager=new THREE.LoadingManager,this._load_manager.onProgress=function(){},this.threed_animate()}}},{key:"threed_animate",value:function(){this._animationFrame=requestAnimationFrame(this.threed_animate.bind(this));this._clock.getDelta();this.update()}},{key:"stop",value:function(){cancelAnimationFrame(this._animationFrame)}},{key:"update",value:function(){this._controls.update()}},{key:"render_threed",value:function(){this._renderer&&(this._renderer.clear(),this._renderer.render(this._scene3d,this._camera)),this._renderer&&this._scene2d&&this._renderer.render(this._scene2d,this._2dCamera),this.invalidate()}},{key:"_draw",value:function(e){this.app.isViewMode&&(this.model.threed||(this.model.threed=!0)),(!this.model.threed||this._noSupportWebgl)&&u(Object.getPrototypeOf(t.prototype),"_draw",this).call(this,e)}},{key:"_post_draw",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,s=n.threed;if(s){if(this._scene3d||(this.init_scene3d(),this.render_threed()),this._noSupportWebgl)return void this._showWebglNoSupportText(e);this._dataChanged&&this._onDataChanged(),this.showTooltip(this._selectedPickingLocation),e.drawImage(this._renderer.domElement,0,0,i,a,r,o,i,a)}else u(Object.getPrototypeOf(t.prototype),"_post_draw",this).call(this,e)}},{key:"dispose",value:function(){u(Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.destroy_scene3d()}},{key:"roundRect",value:function(e,t,n,r,o,i,a,s,c,u){if(void 0!=c||void 0!=s){var l=t-a-i-u,h=l+r+2*a+2*i+2*u,d=n-a-i-u,f=d+o+2*a+2*i+2*u;e.beginPath(),e.moveTo(l+i,d),e.lineTo(h-i,d),e.quadraticCurveTo(h,d,h,d+i),e.lineTo(h,f-i),e.quadraticCurveTo(h,f,h-i,f),e.lineTo(l+i,f),e.quadraticCurveTo(l,f,l,f-i),e.lineTo(l,d+i),e.quadraticCurveTo(l,d,l+i,d),e.closePath(),e.lineWidth=a,void 0!=c&&(e.fillStyle=c,e.fill()),a>0&&void 0!=s&&(e.strokeStyle=s,e.stroke())}}},{key:"getObjectByRaycast",value:function(){var e,t=this.getObjectsByRaycast();return t.length>0&&(e=t[0].object),e}},{key:"getObjectsByRaycast",value:function(){var e=this._mouse;if(this._camera){this._raycaster.setFromCamera(e,this._camera);var t=this._raycaster.intersectObjects(this._scene3d.children,!0);return t}}},{key:"moveCameraTo",value:function(e){if(e){var t=this._scene3d.getObjectByName(e,!0);if(t){var n=this,r=t.getWorldPosition();r.y=0;var o=r.distanceTo(new THREE.Vector3(0,0,0));r.multiplyScalar(1e3/(o||1));var n=this,i=this._camera.position.x-r.x,a=this._camera.position.y-300,s=this._camera.position.z-r.z;this.animate({step:function(e){var t=new THREE.Vector3;t.x=r.x-i*(e-1),t.y=0,t.z=r.z-s*(e-1);var o=t.distanceTo(new THREE.Vector3(0,0,0));t.multiplyScalar(1e3/(o||1)),n._camera.position.x=t.x,n._camera.position.y=300-a*(e-1),n._camera.position.z=t.z,n._camera.lookAt(n._scene3d.position)},duration:2e3,delta:"linear"}).start()}}}},{key:"createTooltipForNavigator",value:function(e){if(e){var t="Arial",n=40,r="rgba(255,255,255,1)",o=2,i="rgba(0, 0, 0, 1.0)",a="rgba(0, 0, 0, 0.7)",s=30,c="middle",u="center",l=document.createElement("canvas"),h=l.getContext("2d");l.width=window.innerWidth,l.height=window.innerHeight,h.font=n+"px "+t,h.textBaseline="alphabetic",h.textAlign="left";var d=0,f=l.width/2,p=l.height/2;h.font=Math.floor(n)+"px "+t;var y=h.measureText("Location");d<y.width&&(d=y.width),h.font="bold "+2*n+"px "+t,y=h.measureText(e.location),d<y.width&&(d=y.width),h.font=n+"px "+t,y=h.measureText("- Material : "+e.material),d<y.width&&(d=y.width),y=h.measureText("- QTY : "+e.qty),d<y.width&&(d=y.width);var m=d/2,b=n/2;"bottom"==c?b=n:"top"==c&&(b=0),"left"==u?m=d:"right"==u&&(m=0);var v=p;this.roundRect(h,f-m,p-6*n*.5,d,8*n,s,o,i,a,0),h.fillStyle=r,h.lineWidth=3,v+=6*-n*.5+Math.floor(n),h.font=Math.floor(n)+"px "+t,h.fillStyle="rgba(134,199,252,1)",h.fillText("Location",f-m,v),v+=2.5*n,h.font="bold "+2*n+"px "+t,h.fillStyle=r,h.fillText(e.location,f-m,v),v+=2*n,h.font=n+"px "+t,h.fillStyle="rgba(204,204,204,1)",h.fillText("- Material : "+e.material,f-m,v),v+=n+b,h.fillText("- QTY : "+e.qty,f-m,v);var E=new THREE.Texture(l);E.needsUpdate=!0;var w=new THREE.SpriteMaterial({map:E}),g=new THREE.Sprite(w);return g.scale.set(window.innerWidth/4*3,window.innerWidth/8*3,1),g.raycast=function(){},g}}},{key:"showTooltip",value:function(e){if(e){var t=this._scene2d.getObjectByName("navigator-tooltip");t&&this._scene2d.remove(t);var n=this._scene3d.getObjectByName(e,!0),r=this._scene3d.getObjectByName(e+"-marker",!0);if(n&&r){var o=r.getWorldPosition().clone();o.project(this._camera),o.z=.5;var i={location:n.userData.location,material:n.userData.material,qty:n.userData.qty};t=this.createTooltipForNavigator(i);var a=t.getWorldScale().clone(),s=a.x/this.model.width,c=a.y/this.model.height;a.normalize(),a.x=0,a.y=1.5*a.y*c,a.z=0,o.add(a),o.unproject(this._2dCamera),t.position.set(o.x,o.y,o.z),t.name="navigator-tooltip",t.scale.x=t.scale.x*s,t.scale.y=t.scale.y*c,this._scene2d.add(t),this.render_threed()}}}},{key:"_showWebglNoSupportText",value:function(e){e.save();var t=this.model,n=t.width,r=t.height;e.font=n/20+"px Arial",e.textAlign="center",e.fillText(v,n/2-n/40,r/2),e.restore()}},{key:"_onDataChanged",value:function(){var e=this;if(this._data)if(this._data instanceof Array)this._data.forEach(function(t){var n=t;setTimeout(function(){var e=n.loc||n.LOC||n.location||n.LOCATION,t=this.getObject(e);t&&(t.userData=n,t.onUserDataChanged())}.bind(e))});else{var t=function(){var t=n;e._data.hasOwnProperty(t)&&setTimeout(function(){var e=this._data[t],n=this.getObject(t);n&&(n.userData=e,n.onUserDataChanged())}.bind(e))};for(var n in this._data)t()}this._dataChanged=!1,this._pickingLocations&&this._pickingLocations.length>0&&this.navigatePath(this._pickingLocations),this.render_threed()}},{key:"onchange",value:function(e){(e.hasOwnProperty("width")||e.hasOwnProperty("height")||e.hasOwnProperty("threed"))&&this.destroy_scene3d(),e.hasOwnProperty("autoRotate")&&(this._controls.autoRotate=e.autoRotate),(e.hasOwnProperty("fov")||e.hasOwnProperty("near")||e.hasOwnProperty("far")||e.hasOwnProperty("zoom"))&&(this._camera.near=this.model.near,this._camera.far=this.model.far,this._camera.zoom=.01*this.model.zoom,this._camera.fov=this.model.fov,this._camera.updateProjectionMatrix(),this._controls.cameraChanged=!0,this._controls.update()),e.hasOwnProperty("data")&&this._data!==e.data&&(this._data=e.data,this._dataChanged=!0),this.invalidate()}},{key:"onmousedown",value:function(e){this._controls&&this._controls.onMouseDown(e)}},{key:"onmousemove",value:function(e){if(this._controls){var t=this.transcoordC2S(e.offsetX,e.offsetY);this._mouse.x=(t.x-this.model.left)/this.model.width*2-1,this._mouse.y=2*-((t.y-this.model.top)/this.model.height)+1;var n=this.getObjectByRaycast();if(n&&n.onmousemove)n.onmousemove(e,this);else{if(!this._scene2d)return;this._scene2d.remove(this._scene2d.getObjectByName("tooltip")),this.render_threed()}this._controls.onMouseMove(e),e.stopPropagation()}}},{key:"onmouseleave",value:function(){if(this._scene2d){var e=this._scene2d.getObjectByName("tooltip");e&&this._scene2d.remove(e)}}},{key:"onwheel",value:function(e){this._controls&&(this.handleMouseWheel(e),e.stopPropagation())}},{key:"ondragstart",value:function(e){if(this._controls){var t=this.transcoordC2S(e.offsetX,e.offsetY);this._mouse.x=(t.x-this.model.left)/this.model.width*2-1,this._mouse.y=2*-((t.y-this.model.top)/this.model.height)+1,this._controls.onDragStart(e),e.stopPropagation()}}},{key:"ondragmove",value:function(e){this._controls&&(this._controls.onDragMove(e),e.stopPropagation())}},{key:"ondragend",value:function(e){this._controls&&(this._controls.onDragEnd(e),e.stopPropagation())}},{key:"ontouchstart",value:function(e){this._controls&&(this._controls.onTouchStart(e),e.stopPropagation())}},{key:"ontouchmove",value:function(e){this._controls&&(this._controls.onTouchMove(e),e.stopPropagation())}},{key:"ontouchend",value:function(e){this._controls&&(this._controls.onTouchEnd(e),e.stopPropagation())}},{key:"onkeydown",value:function(e){this._controls&&(this._controls.onKeyDown(e),e.stopPropagation())}},{key:"handleMouseWheel",value:function(e){var t=0,n=this.model.zoom;t=-e.deltaY,n+=.01*t,0>n&&(n=0),this.set("zoom",n)}},{key:"scene3d",get:function(){return this._scene3d||this.init_scene3d(),this._scene3d}},{key:"layout",get:function(){return m.get("three")}},{key:"nature",get:function(){return b}}]),t}(y);n["default"]=E,p.register("three-container",E)},{"./three-controls":17,"./three-layout":18}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){function n(){return 2*Math.PI/60/60*b.autoRotateSpeed}function r(){return Math.pow(.95,b.zoomSpeed)}function o(e){T-=e}function i(e){g-=e}function a(e){b.object instanceof THREE.PerspectiveCamera?R/=e:b.object instanceof THREE.OrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom*e)),b.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function s(e){b.object instanceof THREE.PerspectiveCamera?R*=e:b.object instanceof THREE.OrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom/e)),b.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function c(e){k.set(e.offsetX,e.offsetY)}function u(e){C.set(e.offsetX,e.offsetY)}function l(e){x.set(e.offsetX,e.offsetY)}function h(e){j.set(e.offsetX,e.offsetY),M.subVectors(j,k);var t=b.component;o(2*Math.PI*M.x/t.get("width")*b.rotateSpeed),i(2*Math.PI*M.y/t.get("height")*b.rotateSpeed),k.copy(j),b.update()}function d(e){S.set(e.offsetX,e.offsetY),D.subVectors(S,C),D.y>0?a(r()):D.y<0&&s(r()),C.copy(S),b.update()}function f(e){P.set(e.offsetX,e.offsetY),H.subVectors(P,x),z(H.x,H.y),x.copy(P),b.update()}function p(e){switch(e.keyCode){case b.keys.UP:z(0,b.keyPanSpeed),b.update();break;case b.keys.BOTTOM:z(0,-b.keyPanSpeed),b.update();break;case b.keys.LEFT:z(b.keyPanSpeed,0),b.update();break;case b.keys.RIGHT:z(-b.keyPanSpeed,0),b.update()}}this.object=e,this.component=t,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=this.component.model.autoRotate||!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.cameraChanged=!1,this.getPolarAngle=function(){return m},this.getAzimuthalAngle=function(){return y},this.reset=function(){b.target.copy(b.target0),b.object.position.copy(b.position0),b.object.zoom=b.zoom0,b.object.updateProjectionMatrix(),b.update(),E=v.NONE},this.update=function(){var t=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=b.object.position;t.copy(e).sub(b.target),t.applyQuaternion(r),y=Math.atan2(t.x,t.z),m=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y),b.autoRotate&&E===v.NONE&&o(n()),y+=T,m+=g,y=Math.max(b.minAzimuthAngle,Math.min(b.maxAzimuthAngle,y)),m=Math.max(b.minPolarAngle,Math.min(b.maxPolarAngle,m)),m=Math.max(w,Math.min(Math.PI-w,m));var c=t.length()*R;return c=Math.max(b.minDistance,Math.min(b.maxDistance,c)),b.target.add(_),t.x=c*Math.sin(m)*Math.sin(y),t.y=c*Math.cos(m),t.z=c*Math.sin(m)*Math.cos(y),t.applyQuaternion(i),e.copy(b.target).add(t),b.object.lookAt(b.target),b.enableDamping===!0?(T*=1-b.dampingFactor,g*=1-b.dampingFactor):(T=0,g=0),R=1,_.set(0,0,0),b.cameraChanged||a.distanceToSquared(b.object.position)>w||8*(1-s.dot(b.object.quaternion))>w?(a.copy(b.object.position),s.copy(b.object.quaternion),b.cameraChanged=!1,b.component.render_threed(),!0):!1}}(),this.dispose=function(){},this.onMouseDown=function(){},this.onMouseMove=function(){},this.onMouseUp=function(){},this.onDragStart=function(e){if(this.enabled!==!1&&this.enableRotate!==!1)switch(b.component.stop(),E=e.altKey===!0?v.PAN:v.ROTATE){case v.ROTATE:this.enableRotate&&c(e);break;case v.DOLLY:this.enableZoom&&u(e);break;case v.PAN:this.enablePan&&l(e)}},this.onDragMove=function(e){if(this.enabled)switch(E=e.altKey===!0?v.PAN:v.ROTATE){case v.ROTATE:this.enableRotate&&h(e);break;case v.DOLLY:this.enableZoom&&d(e);break;case v.PAN:this.enablePan&&f(e)}},this.onDragEnd=function(){this.enabled!==!1&&this.enableRotate!==!1&&(E=v.NONE,b.component.threed_animate())},this.onKeyDown=function(e){this.enabled!==!1&&this.enableKeys!==!1&&this.enablePan!==!1&&p(e)},this.onTouchStart=function(){},this.onTouchMove=function(){},this.onTouchEnd=function(){};var y,m,b=this,v={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},E=v.NONE,w=1e-6,g=0,T=0,R=1,_=new THREE.Vector3,O=!1,k=new THREE.Vector2,j=new THREE.Vector2,M=new THREE.Vector2,x=new THREE.Vector2,P=new THREE.Vector2,H=new THREE.Vector2,C=new THREE.Vector2,S=new THREE.Vector2,D=new THREE.Vector2,A=function(){var e=new THREE.Vector3;return function(t,n){var r=n.elements;e.set(r[0],r[1],r[2]),e.multiplyScalar(-t),_.add(e)}}(),L=function(){var e=new THREE.Vector3;return function(t,n){var r=n.elements;e.set(r[4],r[5],r[6]),e.multiplyScalar(t),_.add(e)}}(),z=function(){var e=new THREE.Vector3;return function(t,n){var r=b.component===document?b.component.body:b.component;if(b.object instanceof THREE.PerspectiveCamera){var o=b.object.position;e.copy(o).sub(b.target);var i=e.length();i*=Math.tan(b.object.fov/2*Math.PI/180),A(2*t*i/r.model.height,b.object.matrix),L(2*n*i/r.model.height,b.object.matrix)}else b.object instanceof THREE.OrthographicCamera?(A(t*(b.object.right-b.object.left)/r.model.width,b.object.matrix),L(n*(b.object.top-b.object.bottom)/r.model.height,b.object.matrix)):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - pan disabled."),b.enablePan=!1)}}();this.update()};r.prototype={},r.prototype.constructor=r,n["default"]=r},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=scene,o=r.Layout,i={reflow:function(){},capturables:function(e){return e.get("threed")?[]:e.components},drawables:function(e){return e.get("threed")?[]:e.components},isStuck:function(){return!1}};o.register("three",i),n["default"]=i},{}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.RectPath,u=s.Component,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src",property:"src"},{type:"checkbox",label:"autoplay",name:"autoplay",property:"autoplay"}]},h=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"init_scene",value:function(e,t){var n=this.model,r=n.mute,o=n.loop,i=n.autoplay,a=n.src,s=n.fov,c=n.clickAndDrag,u=n.wheelEnabled;this._dragStart={},this._lon=0,this._lat=0,this._clickAndDrag=c,this._isPlaying=!1,this._wheelEnabled=u,this._fov=s||35,this._fovMin=3,this._fovMax=100,this._time=(new Date).getTime(),this._scene=new THREE.Scene,this._camera=new THREE.PerspectiveCamera(s,e/t,.1,1e3),this._camera.setFocalLength(s),this._renderer=new THREE.WebGLRenderer,this._renderer.setSize(e,t),this._renderer.autoClear=!1,this._renderer.setClearColor(3355443,1),this._video=document.createElement("video"),this._video.setAttribute("crossorigin","anonymous"),this._video.loop=o,this._video.muted=r,this._texture=new THREE.Texture(this._video);var l=this;this._video.addEventListener("ended",function(){this._isPlaying=!1}),this._video.addEventListener("progress",function(){var e=null;l._video&&l._video.buffered&&l._video.buffered.length>0&&l._video.buffered.end&&l._video.duration?e=l._video.buffered.end(0)/l._video.duration:l._video&&void 0!==l._video.bytesTotal&&l._video.bytesTotal>0&&void 0!==l._video.bufferedBytes&&(e=l._video.bufferedBytes/l._video.bytesTotal);Math.round(100*e)}),this._video.addEventListener("canplay",function(){i===!0&&(l.play(),l._videoReady=!0)}),this._video.src=this.app.url(a),this._texture.generateMipmaps=!1,this._texture.minFilter=THREE.LinearFilter,this._texture.magFilter=THREE.LinearFilter,this._texture.format=THREE.RGBFormat,this._mesh=new THREE.Mesh(new THREE.SphereGeometry(500,80,50),new THREE.MeshBasicMaterial({map:this._texture})),this._mesh.scale.x=-1,this._scene.add(this._mesh),this.animate()}},{key:"destroy_scene",value:function(){cancelAnimationFrame(this._requestAnimationId),this._requestAnimationId=void 0,this._texture.dispose(),this._scene.remove(this._mesh),this.unloadVideo(),this._renderer=void 0,this._camera=void 0,this._keyboard=void 0,this._controls=void 0,this._projector=void 0,this._load_manager=void 0,this._scene=void 0,this._video=void 0}},{key:"loadVideo",value:function(e){this._video.src=e}},{key:"unloadVideo",value:function(){this.pause(),this._video.src="",this._video.removeAttribute("src")}},{key:"play",value:function(){this._isPlaying=!0,this._video.play()}},{key:"pause",value:function(){this._isPlaying=!1,this._video.pause()}},{key:"resize",value:function(e,t){this._renderer&&(this._renderer.setSize(e,t),this._camera.aspect=e/t,this._camera.updateProjectionMatrix())}},{key:"animate",value:function(){if(this._requestAnimationId=requestAnimationFrame(this.animate.bind(this)),this._video.readyState===this._video.HAVE_ENOUGH_DATA&&"undefined"!=typeof this._texture){var e=(new Date).getTime();e-this._time>=30&&(this._texture.needsUpdate=!0,this._time=e)}this.render(),this.invalidate()}},{key:"render",value:function(){this._lat=Math.max(-85,Math.min(85,this._lat||0)),this._phi=(90-this._lat)*Math.PI/180,this._theta=(this._lon||0)*Math.PI/180;var e=500*Math.sin(this._phi)*Math.cos(this._theta),t=500*Math.cos(this._phi),n=500*Math.sin(this._phi)*Math.sin(this._theta);this._camera.lookAt(new THREE.Vector3(e,t,n)),this.model.flatProjection?(this._camera.position.x=0,this._camera.position.y=0,this._camera.position.z=0):(this._camera.position.x=-e,this._camera.position.y=-t,this._camera.position.z=-n),this._renderer.clear(),this._renderer.render(this._scene,this._camera)}},{key:"createControls",value:function(){var e=this.options.muted?"fa-volume-off":"fa-volume-up",t=this.options.autoplay?"fa-pause":"fa-play",n='           <div class="controls">               <a href="#" class="playButton button fa '+t+'"></a>               <a href="#" class="muteButton button fa '+e+'"></a>               <a href="#" class="fullscreenButton button fa fa-expand"></a>           </div>       ';$(this.element).append(n,!0),this.options.hideControls&&$(this.element).find(".controls").hide()}},{key:"attachControlEvents",value:function(){var e=this;this.element.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.element.addEventListener("touchmove",this.onMouseMove.bind(this),!1),this.element.addEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.element.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.element.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.element.addEventListener("touchstart",this.onMouseDown.bind(this),!1),this.element.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.element.addEventListener("touchend",this.onMouseUp.bind(this),!1),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.fullscreen.bind(this)),$(window).resize(function(){e.resizeGL($(e.element).width(),$(e.element).height())}),$(this.element).find(".playButton").click(function(t){t.preventDefault(),$(this).hasClass("fa-pause")?($(this).removeClass("fa-pause").addClass("fa-play"),e.pause()):($(this).removeClass("fa-play").addClass("fa-pause"),e.play())}),$(this.element).find(".fullscreenButton").click(function(t){t.preventDefault();var n=$(e.element)[0];$(this).hasClass("fa-expand")?n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen():n.requestFullscreen?document.exitFullscreen():n.msRequestFullscreen?document.msExitFullscreen():n.mozRequestFullScreen?document.mozCancelFullScreen():n.webkitRequestFullscreen&&document.webkitExitFullscreen()}),$(this.element).find(".muteButton").click(function(t){t.preventDefault(),$(this).hasClass("fa-volume-off")?($(this).removeClass("fa-volume-off").addClass("fa-volume-up"),e._video.muted=!1):($(this).removeClass("fa-volume-up").addClass("fa-volume-off"),e._video.muted=!0)})}},{key:"_draw",value:function(e){{var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height;t.src}e.beginPath(),e.rect(n,r,o,i)}},{key:"_post_draw",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height,a=t.src;a?(this._scene||(this.init_scene(o,i),this.render()),e.drawImage(this._renderer.domElement,0,0,o,i,n,r,o,i)):this.drawFill(e),this.drawStroke(e)}},{key:"onchange",value:function(e){(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&this.resize(this.model.width,this.model.height),(e.hasOwnProperty("src")||e.hasOwnProperty("autoplay"))&&this.destroy_scene(),this.invalidate()}},{key:"ondblclick",value:function(e){this._isPlaying?this.pause():this.play(),e.stopPropagation()}},{key:"onmousedown",value:function(){}},{key:"onmousemove",value:function(e){if(this._clickAndDrag===!1){var t,n;this._onPointerDownPointerX=e.offsetX,this._onPointerDownPointerY=-e.offsetY,this._onPointerDownLon=this._lon,this._onPointerDownLat=this._lat,t=e.offsetX-this._renderer.getContext().canvas.offsetLeft,n=e.offsetY-this._renderer.getContext().canvas.offsetTop,this._lon=t/this._renderer.getContext().canvas.width*430-225,this._lat=n/this._renderer.getContext().canvas.height*-180+90}}},{key:"onwheel",value:function(e){if(this._wheelEnabled!==!1){var t=.01;this._fov-=e.deltaY*t,this._fov<this._fovMin?this._fov=this._fovMin:this._fov>this._fovMax&&(this._fov=this._fovMax),this._camera.setFocalLength(this._fov),this._camera.updateProjectionMatrix(),e.stopPropagation()}}},{key:"ondragstart",value:function(e){this._dragStart.x=e.offsetX,this._dragStart.y=e.offsetY}},{key:"ondragmove",value:function(e){if(this._isPlaying!==!1){if(this._clickAndDrag!==!1){this._onPointerDownPointerX=e.offsetX,this._onPointerDownPointerY=-e.offsetY,this._onPointerDownLon=this._lon,this._onPointerDownLat=this._lat;var t,n;t=e.offsetX-this._dragStart.x,n=e.offsetY-this._dragStart.y,this._dragStart.x=e.offsetX,this._dragStart.y=e.offsetY,this._lon+=t,this._lat-=n}e.stopPropagation()}}},{key:"ondragend",value:function(){}},{key:"ontouchstart",value:function(){}},{key:"ontouchmove",value:function(){}},{key:"ontouchend",value:function(){}},{key:"onkeydown",value:function(){}},{key:"nature",get:function(){return l}}]),t}(c(u));n["default"]=h,u.register("video-player-360",h)},{}],20:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=scene,c=s.Component,u=s.Rect,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"}]},h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i._model=e,i.createObject(e,n),i}return i(t,e),a(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=.5*e.depth,i=e.rotation;this.type=e.type,this.createWall(e.width,e.height,e.depth),this.position.set(n,o,r),this.rotation.y=i||0,e.opacity=e.opacity||.7,this.material.opacity=e.opacity,this.material.transparent=e.opacity<1}},{key:"createWall",value:function(e,t,n){var r=this._model.fillStyle,o=void 0===r?"gray":r;this.geometry=new THREE.BoxGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}(THREE.Mesh);n["default"]=h;var d=n.Wall2d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"is3dish",value:function(){return!0}},{key:"nature",get:function(){return l}},{key:"controls",get:function(){}}]),t}(u);c.register("wall",d),scene.Component3d.register("wall",h)},{}]},{},[10]);